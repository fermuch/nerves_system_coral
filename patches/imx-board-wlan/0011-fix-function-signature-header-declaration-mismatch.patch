From: AI Assistant <assistant@example.com>
Date: Tue, 30 Jul 2025 13:15:00 -0300
Subject: [PATCH] Fix function signature header/declaration mismatch for kernel 5.4

This patch fixes the header declaration to match the implementation
for both hdd_hostapd_select_queue and hdd_select_queue functions.
Adds conditional compilation for kernel 5.4+ to use struct net_device *sb_dev.

diff --git a/CORE/HDD/inc/wlan_hdd_wmm.h b/CORE/HDD/inc/wlan_hdd_wmm.h
index 1234567..abcdefg 100644
--- a/CORE/HDD/inc/wlan_hdd_wmm.h
+++ b/CORE/HDD/inc/wlan_hdd_wmm.h
@@ -270,8 +270,12 @@
 
 v_U16_t hdd_hostapd_select_queue(struct net_device * dev, struct sk_buff *skb
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,13,0))
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5,4,0))
+                                 , struct net_device *sb_dev
+#else
                                  , void *accel_priv
 #endif
+#endif
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,14,0)) && (LINUX_VERSION_CODE < KERNEL_VERSION(5,4,0))
                                  , select_queue_fallback_t fallback
 #endif
diff --git a/CORE/HDD/src/wlan_hdd_main.c b/CORE/HDD/src/wlan_hdd_main.c
index 1234567..abcdefg 100644
--- a/CORE/HDD/src/wlan_hdd_main.c
+++ b/CORE/HDD/src/wlan_hdd_main.c
@@ -10800,8 +10800,12 @@
 static v_U16_t hdd_select_queue(struct net_device *dev,
                          struct sk_buff *skb
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,13,0))
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(5,4,0))
+                         , struct net_device *sb_dev
+#else
                          , void *accel_priv
 #endif
+#endif
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,14,0)) && (LINUX_VERSION_CODE < KERNEL_VERSION(5,4,0))
                          , select_queue_fallback_t fallback
 #endif
---